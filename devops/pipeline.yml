trigger:
  branches:
    exclude:
    - TK/*
    - BG/*
    - FT/*

  paths:  
    exclude:
    - docs/*
    - documents/*
    - .devcontainer/*
    - terraform/bootstrap/*
    - terraform/templates/*
    - templates/*

pool:
  vmImage: ubuntu-latest

stages:

  - stage: CI
    displayName: Continuous Integration
    jobs: 
    - job: CIvalidation
    variables:
    - group: kv-tf
  - template: stages/ci.yml


  - stage: CD
    condition: succeeded() 
    displayName: Continuous Deployment
    jobs: 
    - job: "CD"
    variables:
    - group: kv-tf
  - template: stages/cd.yml